{"version":3,"file":"index.js","sources":["password/templates/.templates_compiled.js","password/templates/.partials_compiled.js","password/templates/main.js","password/views/SendLinkView.js","password/views/ResetPasswordView.js","password/views/PasswordWorkspaceView.js","password/router.js","password/index.js"],"names":[],"mappings":"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","sourcesContent":["define('password/templates_compiled',['handlebars'], function(Handlebars) {\n\nthis[\"LMTPL\"] = this[\"LMTPL\"] || {};\n\nthis[\"LMTPL\"][\"password/PasswordWorkspace\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  var stack1, buffer = \"<div class=\\\"signin-content\\\">\\n    <div class=\\\"signin-logo\\\"></div>\\n    <div class=\\\"section-box\\\" style=\\\"background: #97d7ef;\\\">\\n        <div class=\\\"sub-con\\\"></div>\\n    </div>\\n</div>\\n\\n\";\n  stack1 = this.invokePartial(partials['commons/logicmonitor/foot'], '', 'commons/logicmonitor/foot', depth0, undefined, helpers, partials, data);\n  if (stack1 != null) { buffer += stack1; }\n  return buffer + \"\\n\";\n},\"usePartial\":true,\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"password/ResetPassword\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"<div class=\\\"validationEngineContainer\\\">\\n<div class=\\\"section-row\\\">\\n    <label>Enter your new password</label>\\n    <input type=\\\"password\\\" id=\\\"password\\\" name=\\\"password\\\" class=\\\"validate[required]\\\">\\n</div>\\n\\n<div class=\\\"section-row\\\">\\n    <label>Re-Enter your new password</label>\\n    <input id=\\\"re-password\\\" type=\\\"password\\\" name=\\\"re-password\\\" class=\\\"validate[required, equals[password]]\\\">\\n</div>\\n\\n<div class=\\\"section-row clearfix\\\" style=\\\"height:35px;line-height: 35px;\\\">\\n    <a href=\\\"#\\\" class=\\\"btn-confirm right lm-button purple\\\">Confirm</a>\\n</div>\\n</div>\";\n  },\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"password/SendLink\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"<div class=\\\"section-row\\\">\\n    <label style=\\\"color:black;\\\">Forgotten Password</label>\\n    <p>Enter your user name and a link to reset your password will be emailed to you.</p>\\n</div>\\n\\n<div class=\\\"section-row\\\">\\n    <label>Username or Email:</label>\\n    <input type=\\\"text\\\" name=\\\"username\\\">\\n</div>\\n\\n<div class=\\\"section-row clearfix\\\" style=\\\"height:35px;line-height: 35px;\\\">\\n    <a href=\\\"login.html\\\" class=\\\"\\\" style=\\\"font-size: 16px;\\\">Cancel</a>\\n    <a href=\\\"#\\\" class=\\\"btn-send right lm-button purple\\\">Send</a>\\n</div>\\n\";\n  },\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"password/partials/placeholder\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"\";\n},\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"password/placeholder\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"\";\n},\"useData\":true});\n\nreturn this[\"LMTPL\"];\n\n});\n","define('password/partials_compiled',['handlebars'], function(Handlebars) {\n\nthis[\"LMPAR\"] = this[\"LMPAR\"] || {};\n\nHandlebars.registerPartial(\"password/placeholder\", this[\"LMPAR\"][\"password/placeholder\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"\";\n},\"useData\":true}));\n\nreturn this[\"LMPAR\"];\n\n});\n","define('password/templates/main',[\n\t'handlebars',\n\t'commons/logicmonitor/templates',\n\t'password/templates_compiled',\n\t'password/partials_compiled'\n], function (Handlebars, commonTemplates, templates) {\n\t// return compiled templates\n\treturn templates;\n});\n\n","define('password/views/SendLinkView',[\n\t'core',\n\t'password/templates',\n\t'modelurls',\n\t'lmblockui',\n\t'lmmsgbox'\n], function (LM, templates, modelUrls, BlockUI, MessageBox) {\n\n\treturn LM.View.extend({\n\t\ttemplate: templates['password/SendLink'],\n\n\t\tevents: {\n\t\t\t'click .btn-send': '_onSend'\n\t\t},\n\n\t\tappEvents: {\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tthis.blockUI = new BlockUI();\n\t\t},\n\n\t\trender: function () {\n\t\t\tthis.$el.html(this.template());\n\t\t},\n\n\t\t_onSend: function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar that = this;\n\t\t\tvar data = this.serializeForm();\n\n\t\t\tthis.blockUI.block({\n\t\t\t\tmessage: 'Sending...'\n\t\t\t});\n\n\t\t\tthis._sendLink(data, function (err) {\n\t\t\t\tthat.blockUI.unBlock();\n\t\t\t\tif (!err) {\n\t\t\t\t\tnew MessageBox({\n\t\t\t\t\t\ttype: 'alert',\n\t\t\t\t\t\ttitle: 'Forgot password',\n\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\tbodyData: {\n\t\t\t\t\t\t\tmsg: '<p style=\"line-height: 1.5\">The reset password link has been sent to your registered email.' +\n\t\t\t\t\t\t\t\t'The reset link will only be active for 30 minutes. After reset your password, you can ' +\n\t\t\t\t\t\t\t\t'<a href=\"login.html\" style=\"font-size: 16px;\">Go to log in!</a></p>',\n\t\t\t\t\t\t\tallowHTML: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}).on('dialog:closing', function () {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tlocation.href = 'login.html';\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tMessageBox.alert( err.status + ':' + err.errmsg, 'Error');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_sendLink: function (data, cb) {\n\t\t\tLM.rajax({\n\t\t\t\ttype: 'post',\n\t\t\t\turl: modelUrls.forgotpass,\n\t\t\t\tdata: JSON.stringify({\n\t\t\t\t\tusername: data.username\n\t\t\t\t}),\n\t\t\t\tsuccess: function (response) {\n\n\t\t\t\t\tcb(null, response.data);\n\t\t\t\t},\n\t\t\t\terror: function (response) {\n\t\t\t\t\tcb(response);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\n","define('password/views/ResetPasswordView',[\n\t'core',\n\t'password/templates',\n\t'modelurls',\n\t'lmblockui',\n\t'lmmsgbox',\n\t'jq-validationEngine-en'\n], function (LM, templates, modelUrls, BlockUI, MessageBox) {\n\n\treturn LM.View.extend({\n\t\ttemplate: templates['password/ResetPassword'],\n\n\t\tevents: {\n\t\t\t'click .btn-confirm': '_onConfirm'\n\t\t},\n\n\t\tappEvents: {\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tthis.blockUI = new BlockUI();\n\t\t},\n\n\t\trender: function () {\n\t\t\tthis.$el.html(this.template());\n\t\t\tthis.$('.validationEngineContainer').validationEngine({\n\t\t\t});\n\t\t},\n\n\t\t_onConfirm: function (e) {\n\t\t\tvar that = this;\n\t\t\te.preventDefault();\n\n\n\t\t\tif (this.$('.validationEngineContainer').validationEngine('validate')) {\n\t\t\t\tthis.blockUI.block({\n\t\t\t\t});\n\n\t\t\t\tvar data = this.serializeForm();\n\n\t\t\t\tthis._confirm(data, function (err) {\n\t\t\t\t\tthat.blockUI.unBlock();\n\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tnew MessageBox({\n\t\t\t\t\t\t\ttype: 'alert',\n\t\t\t\t\t\t\ttitle: 'Password reset',\n\t\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\t\tbodyData: {\n\t\t\t\t\t\t\t\tmsg: '<p style=\"line-height: 1.5\">You password has been reset, please ' +\n\t\t\t\t\t\t\t\t\t'<a href=\"login.html\" style=\"font-size: 16px;\">Go to log in!</a></p>',\n\t\t\t\t\t\t\t\tallowHTML: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).on('dialog:closing', function () {\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tlocation.href = 'login.html';\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tMessageBox.alert( err.status + ':' + err.errmsg, 'Error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_confirm: function (data, cb) {\n\t\t\tLM.rajax({\n\t\t\t\ttype: 'post',\n\t\t\t\turl: modelUrls.resetpass + location.search,\n\t\t\t\tdata: JSON.stringify({\n\t\t\t\t\tpassword: data.password\n\t\t\t\t}),\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t\tcb(null, response.data);\n\t\t\t\t},\n\t\t\t\terror: function (response) {\n\t\t\t\t\tcb(response);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\n","define('password/views/PasswordWorkspaceView',[\n\t'core',\n\t'password/templates',\n\t'modelurls',\n\t'lmblockui',\n\t'lmmsgbox',\n\t'./SendLinkView',\n\t'./ResetPasswordView'\n], function (LM, templates, modelUrls, BlockUI, MessageBox, SendLinkView, ResetPasswordView) {\n\n\treturn LM.View.extend({\n\t\tclassName: 'workspace password-workspace',\n\n\t\ttemplate: templates['password/PasswordWorkspace'],\n\n\t\tevents: {\n\t\t},\n\n\t\tappEvents: {\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tthis.module = options.module;\n\t\t\tthis.blockUI = new BlockUI();\n\t\t},\n\n\t\trender: function () {\n\t\t\tvar module = this.module;\n\n\t\t\tthis.$el.html(this.template());\n\n\t\t\tif (module == 'reset') {\n\t\t\t\tthis.registerComponent('sub', new ResetPasswordView(), '.sub-con');\n\t\t\t} else {\n\t\t\t\tthis.registerComponent('sub', new SendLinkView(), '.sub-con');\n\t\t\t}\n\t\t}\n\t});\n});\n\n","define('password/router',[\n\t'jquery',\n\t'backbone',\n    './views/PasswordWorkspaceView'\n], function ($, Backbone, PasswordWorkspaceView) {\n\n\treturn Backbone.Router.extend({\n\t\troutes: {\n\t\t\t'(*module)': 'showWorkspace'\n\t\t},\n\n\t\tinitialize: function () {\n\t\t},\n\n\t\tshowWorkspace: function (module) {\n\t\t\tmodule = module || 'send';\n\n\t\t\tif (this.appView) {\n\t\t\t\tthis.appView.remove();\n\t\t\t}\n\n\t\t\tthis.appView = new PasswordWorkspaceView({\n\t\t\t\tmodule: module\n\t\t\t});\n\n\t\t\t$('.workspace-con').append(this.appView.el);\n\t\t\tthis.appView.render();\n\t\t}\n\t});\n});\n\n","define('password/index',[\n\t'backbone',\n\t'./router'\n], function(Backbone, Router) {\n\tnew Router();\n\tBackbone.history.start();\n});\n\n"]}