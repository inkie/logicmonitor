define("profile/templates_compiled",["handlebars"],function(e){return this.LMTPL=this.LMTPL||{},this.LMTPL["profile/ChangePassword"]=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="section-box validationEngineContainer">\n    <h4 class="section-header">\n        <span class="icons16 sectionArrow-blue"></span>\n        <a href="javascript:;" class="toggle-link">Change your password</a>\n    </h4>\n    <div class="section-content">\n        <div class="section-row">\n            <label>Old password </label>\n            <input type="password" name="oldPassword" class="validate[required]">\n        </div>\n        <div class="section-row">\n            <label>Enter your new password</label>\n            <input type="password" id="password" name="password" class="validate[required]">\n        </div>\n\n        <div class="section-row">\n            <label>Re-Enter your new password</label>\n            <input id="re-password" type="password" name="re-password" class="validate[required, equals[password]]">\n        </div>\n        <div class="section-row">\n            <a href="javascript:;" class="right btn-change lm-button purple animate">Change now!</a>\n            <a href="#" class="right lm-button gray animate" style="margin-right:10px;">Cancel</a>\n        </div>\n    </div>\n</div>'},useData:!0}),this.LMTPL["profile/Profile"]=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,n,a,i){var t,s="function",l=n.helperMissing,o=this.escapeExpression;return'\n<div class="section-box validationEngineContainer">\n    <h4 class="section-header">\n        <span class="icons16 sectionArrow-blue"></span>\n        <a href="javascript:;" class="toggle-link">Manage you profile here</a>\n    </h4>\n    <div class="section-content">\n        <div class="section-row">\n            <label>User name\n                <a href="#change-password" style="margin-left:10px;">Change password</a>\n            </label>\n            <input type="text" name="username" class="validate[required]" value="'+o((t=null!=(t=n.username||(null!=e?e.username:e))?t:l,typeof t===s?t.call(e,{name:"username",hash:{},data:i}):t))+'">\n        </div>\n        <div class="section-row">\n            <label>Email</label>\n            <input type="text" name="email" class="validate[required, custom[email]]" value="'+o((t=null!=(t=n.email||(null!=e?e.email:e))?t:l,typeof t===s?t.call(e,{name:"email",hash:{},data:i}):t))+'">\n        </div>\n        <div class="section-row">\n            <label>Last Name</label>\n            <input type="text" name="lastName" value="'+o((t=null!=(t=n.lastName||(null!=e?e.lastName:e))?t:l,typeof t===s?t.call(e,{name:"lastName",hash:{},data:i}):t))+'">\n        </div>\n        <div class="section-row">\n            <label>First Name</label>\n            <input type="text" name="firstName" value="'+o((t=null!=(t=n.firstName||(null!=e?e.firstName:e))?t:l,typeof t===s?t.call(e,{name:"firstName",hash:{},data:i}):t))+'">\n        </div>\n        <div class="section-row">\n            <label>Phone Num</label>\n            <input type="text" name="phone" value="'+o((t=null!=(t=n.phone||(null!=e?e.phone:e))?t:l,typeof t===s?t.call(e,{name:"phone",hash:{},data:i}):t))+'">\n        </div>\n        <div class="section-row">\n            <a href="javascript:;" class="right btn-update lm-button purple animate">Update</a>\n            <a href="index.html" class="right lm-button gray animate" style="margin-right:10px;">Cancel</a>\n        </div>\n    </div>\n</div>\n'},useData:!0}),this.LMTPL["profile/ProfileWorkspace"]=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="sub-con"></div>\n'},useData:!0}),this.LMTPL["profile/partials/placeholder"]=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return""},useData:!0}),this.LMTPL["profile/placeholder"]=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return""},useData:!0}),this.LMTPL}),define("profile/partials_compiled",["handlebars"],function(e){return this.LMPAR=this.LMPAR||{},e.registerPartial("profile/placeholder",this.LMPAR["profile/placeholder"]=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return""},useData:!0})),this.LMPAR}),define("profile/templates/main",["handlebars","commons/logicmonitor/templates","profile/templates_compiled","profile/partials_compiled"],function(e,n,a){return a}),define("profile/views/ProfileView",["core","lodash","profile/templates","modelurls","lmblockui","lmmsgbox","commons/logicmonitor/models/UserModel","jq-validationEngine-en"],function(e,n,a,i,t,s){return e.View.extend({template:a["profile/Profile"],events:{"click .btn-update":"_onUpdate"},appEvents:{},initialize:function(){this.blockUI=new t,this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$(".validationEngineContainer").validationEngine({})},_onUpdate:function(e){e.preventDefault();var n=this;if(this.$(".validationEngineContainer").validationEngine("validate")){var a=this.serializeForm();this.blockUI.block({message:"Updating..."}),this._update(a,function(e){n.blockUI.unBlock(),e?s.alert(e.status+":"+e.errmsg,"Error"):s.alert("Update user profile info successfully!","Update user profile")})}},_update:function(e,n){this.model.save(e,{success:function(e){n(null,e.toJSON())},error:function(e,a){n(a)}})}})}),define("profile/views/ChangePasswordView",["core","profile/templates","modelurls","lmblockui","lmmsgbox","commons/logicmonitor/models/UserModel","jq-validationEngine-en"],function(e,n,a,i,t,s){return e.View.extend({template:n["profile/ChangePassword"],events:{"click .btn-change":"_onChangePass"},appEvents:{},initialize:function(){this.blockUI=new i},render:function(){this.$el.html(this.template()),this.$(".validationEngineContainer").validationEngine({})},_onChangePass:function(n){var a=this;if(n.preventDefault(),this.$(".validationEngineContainer").validationEngine("validate")){this.blockUI.block({});var i=this.serializeForm();this._changePass(i,function(n){a.blockUI.unBlock(),n?t.alert(n.status+":"+n.errmsg,"Error"):(e.logoffUser(),new t({type:"alert",title:"Password change successfully",width:600,bodyData:{msg:'<p style="line-height: 1.5">You password has been changed, please <a href="login.html" style="font-size: 16px;">Go to log in!</a></p>',allowHTML:!0}}).on("dialog:closing",function(){setTimeout(function(){location.href="login.html"},0)}))})}},_changePass:function(n,a){var i=e.getLoginUser(),t=new s({password:n.password,id:i.id});t.save(null,{patch:!0,success:function(e){a(null,e.toJSON())},error:function(e,n){a(n)}})}})}),define("profile/views/ProfileWorkspaceView",["core","profile/templates","modelurls","lmblockui","lmmsgbox","./ProfileView","./ChangePasswordView","commons/logicmonitor/models/UserModel"],function(e,n,a,i,t,s,l,o){return e.View.extend({className:"workspace profile-workspace",template:n["profile/ProfileWorkspace"],events:{},appEvents:{},initialize:function(e){this.module=e.module,this.blockUI=new i},render:function(){var n=this.module;if(this.$el.html(this.template()),"change-password"==n)this.registerComponent("sub",new l,".sub-con");else{var a=new o(e.getLoginUser());this.registerComponent("sub",new s({model:a}),".sub-con"),a.fetch()}}})}),define("profile/router",["jquery","backbone","./views/ProfileWorkspaceView"],function(e,n,a){return n.Router.extend({routes:{"(*module)":"showWorkspace"},initialize:function(){},showWorkspace:function(n){n=n||"profile",this.appView&&this.appView.remove(),this.appView=new a({module:n}),e(".workspace-con").append(this.appView.el),this.appView.render()}})}),define("profile/index",["backbone","./router"],function(e,n){new n,e.history.start()});
//# sourceMappingURL=index.js.map