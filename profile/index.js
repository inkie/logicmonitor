define("profile/templates_compiled",["handlebars"],function(e){return this.JST=this.JST||{},this.JST["profile/ChangePassword"]=e.template(function(e,n,i,t,a){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{},'<div class="section-box validationEngineContainer">\n    <h4 class="section-header">\n        <span class="icons16 sectionArrow-blue"></span>\n        <a href="javascript:;" class="toggle-link">Change your password</a>\n    </h4>\n    <div class="section-content">\n        <div class="section-row">\n            <label>Old password </label>\n            <input type="password" name="oldPassword" class="validate[required]">\n        </div>\n        <div class="section-row">\n            <label>Enter your new password</label>\n            <input type="password" id="password" name="password" class="validate[required]">\n        </div>\n\n        <div class="section-row">\n            <label>Re-Enter your new password</label>\n            <input id="re-password" type="password" name="re-password" class="validate[required, equals[password]]">\n        </div>\n        <div class="section-row">\n            <a href="javascript:;" class="right btn-change lm-button purple animate">Change now!</a>\n            <a href="#" class="right lm-button gray animate" style="margin-right:10px;">Cancel</a>\n        </div>\n    </div>\n</div>'}),this.JST["profile/Profile"]=e.template(function(e,n,i,t,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s,l="",o="function",r=this.escapeExpression;return l+='\n<div class="section-box validationEngineContainer">\n    <h4 class="section-header">\n        <span class="icons16 sectionArrow-blue"></span>\n        <a href="javascript:;" class="toggle-link">Manage you profile here</a>\n    </h4>\n    <div class="section-content">\n        <div class="section-row">\n            <label>User name\n                <a href="#change-password" style="margin-left:10px;">Change password</a>\n            </label>\n            <input type="text" name="username" class="validate[required]" value="',(s=i.username)?s=s.call(n,{hash:{},data:a}):(s=n.username,s=typeof s===o?s.apply(n):s),l+=r(s)+'">\n        </div>\n        <div class="section-row">\n            <label>Email</label>\n            <input type="text" name="email" class="validate[required, custom[email]]" value="',(s=i.email)?s=s.call(n,{hash:{},data:a}):(s=n.email,s=typeof s===o?s.apply(n):s),l+=r(s)+'">\n        </div>\n        <div class="section-row">\n            <label>Last Name</label>\n            <input type="text" name="lastName" value="',(s=i.lastName)?s=s.call(n,{hash:{},data:a}):(s=n.lastName,s=typeof s===o?s.apply(n):s),l+=r(s)+'">\n        </div>\n        <div class="section-row">\n            <label>First Name</label>\n            <input type="text" name="firstName" value="',(s=i.firstName)?s=s.call(n,{hash:{},data:a}):(s=n.firstName,s=typeof s===o?s.apply(n):s),l+=r(s)+'">\n        </div>\n        <div class="section-row">\n            <label>Phone Num</label>\n            <input type="text" name="phone" value="',(s=i.phone)?s=s.call(n,{hash:{},data:a}):(s=n.phone,s=typeof s===o?s.apply(n):s),l+=r(s)+'">\n        </div>\n        <div class="section-row">\n            <a href="javascript:;" class="right btn-update lm-button purple animate">Update</a>\n            <a href="index.html" class="right lm-button gray animate" style="margin-right:10px;">Cancel</a>\n        </div>\n    </div>\n</div>\n'}),this.JST["profile/ProfileWorkspace"]=e.template(function(e,n,i,t,a){return this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{},'<div class="sub-con"></div>\n'}),this.JST["profile/partials/placeholder"]=e.template(function(e,n,i,t,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s="";return s}),this.JST["profile/placeholder"]=e.template(function(e,n,i,t,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s="";return s}),this.JST}),define("profile/partials_compiled",["handlebars"],function(e){return this.JST=this.JST||{},e.registerPartial("profile/placeholder",e.template(function(e,n,i,t,a){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,e.helpers),a=a||{};var s="";return s})),this.JST}),define("profile/templates/main",["handlebars","commons/logicmonitor/templates","profile/templates_compiled","profile/partials_compiled"],function(e,n,i){return i}),define("profile/views/ProfileView",["core","lodash","profile/templates","modelurls","lmblockui","lmmsgbox","commons/logicmonitor/models/UserModel","jq-validationEngine-en"],function(e,n,i,t,a,s){return e.View.extend({template:i["profile/Profile"],events:{"click .btn-update":"_onUpdate"},appEvents:{},initialize:function(){this.blockUI=new a,this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(this.template(this.model.toJSON())),this.$(".validationEngineContainer").validationEngine({})},_onUpdate:function(e){e.preventDefault();var n=this;if(this.$(".validationEngineContainer").validationEngine("validate")){var i=this.serializeForm();this.blockUI.block({message:"Updating..."}),this._update(i,function(e){n.blockUI.unBlock(),e?s.alert(e.status+":"+e.errmsg,"Error"):s.alert("Update user profile info successfully!","Update user profile")})}},_update:function(e,n){this.model.save(e,{success:function(e){n(null,e.toJSON())},error:function(e,i){n(i)}})}})}),define("profile/views/ChangePasswordView",["core","profile/templates","modelurls","lmblockui","lmmsgbox","commons/logicmonitor/models/UserModel","jq-validationEngine-en"],function(e,n,i,t,a,s){return e.View.extend({template:n["profile/ChangePassword"],events:{"click .btn-change":"_onChangePass"},appEvents:{},initialize:function(){this.blockUI=new t},render:function(){this.$el.html(this.template()),this.$(".validationEngineContainer").validationEngine({})},_onChangePass:function(n){var i=this;if(n.preventDefault(),this.$(".validationEngineContainer").validationEngine("validate")){this.blockUI.block({});var t=this.serializeForm();this._changePass(t,function(n){i.blockUI.unBlock(),n?a.alert(n.status+":"+n.errmsg,"Error"):(e.logoffUser(),new a({type:"alert",title:"Password change successfully",width:600,bodyData:{msg:'<p style="line-height: 1.5">You password has been changed, please <a href="login.html" style="font-size: 16px;">Go to log in!</a></p>',allowHTML:!0}}).on("dialog:closing",function(){setTimeout(function(){location.href="login.html"},0)}))})}},_changePass:function(n,i){var t=e.getLoginUser(),a=new s({password:n.password,id:t.id});a.save(null,{patch:!0,success:function(e){i(null,e.toJSON())},error:function(e,n){i(n)}})}})}),define("profile/views/ProfileWorkspaceView",["core","profile/templates","modelurls","lmblockui","lmmsgbox","./ProfileView","./ChangePasswordView","commons/logicmonitor/models/UserModel"],function(e,n,i,t,a,s,l,o){return e.View.extend({className:"workspace profile-workspace",template:n["profile/ProfileWorkspace"],events:{},appEvents:{},initialize:function(e){this.module=e.module,this.blockUI=new t},render:function(){var n=this.module;if(this.$el.html(this.template()),"change-password"==n)this.registerComponent("sub",new l,".sub-con");else{var i=new o(e.getLoginUser());this.registerComponent("sub",new s({model:i}),".sub-con"),i.fetch()}}})}),define("profile/router",["jquery","backbone","./views/ProfileWorkspaceView"],function(e,n,i){return n.Router.extend({routes:{"(*module)":"showWorkspace"},initialize:function(){},showWorkspace:function(n){n=n||"profile",this.appView&&this.appView.remove(),this.appView=new i({module:n}),e(".workspace-con").append(this.appView.el),this.appView.render()}})}),define("profile/index",["backbone","./router"],function(e,n){new n,e.history.start()});
//# sourceMappingURL=index.js.map