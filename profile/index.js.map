{"version":3,"file":"index.js","sources":["profile/templates/.templates_compiled.js","profile/templates/.partials_compiled.js","profile/templates/main.js","profile/views/ProfileView.js","profile/views/ChangePasswordView.js","profile/views/ProfileWorkspaceView.js","profile/router.js","profile/index.js"],"names":[],"mappings":"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","sourcesContent":["define('profile/templates_compiled',['handlebars'], function(Handlebars) {\n\nthis[\"LMTPL\"] = this[\"LMTPL\"] || {};\n\nthis[\"LMTPL\"][\"profile/ChangePassword\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"<div class=\\\"section-box validationEngineContainer\\\">\\n    <h4 class=\\\"section-header\\\">\\n        <span class=\\\"icons16 sectionArrow-blue\\\"></span>\\n        <a href=\\\"javascript:;\\\" class=\\\"toggle-link\\\">Change your password</a>\\n    </h4>\\n    <div class=\\\"section-content\\\">\\n        <div class=\\\"section-row\\\">\\n            <label>Old password </label>\\n            <input type=\\\"password\\\" name=\\\"oldPassword\\\" class=\\\"validate[required]\\\">\\n        </div>\\n        <div class=\\\"section-row\\\">\\n            <label>Enter your new password</label>\\n            <input type=\\\"password\\\" id=\\\"password\\\" name=\\\"password\\\" class=\\\"validate[required]\\\">\\n        </div>\\n\\n        <div class=\\\"section-row\\\">\\n            <label>Re-Enter your new password</label>\\n            <input id=\\\"re-password\\\" type=\\\"password\\\" name=\\\"re-password\\\" class=\\\"validate[required, equals[password]]\\\">\\n        </div>\\n        <div class=\\\"section-row\\\">\\n            <a href=\\\"javascript:;\\\" class=\\\"right btn-change lm-button purple animate\\\">Change now!</a>\\n            <a href=\\\"#\\\" class=\\\"right lm-button gray animate\\\" style=\\\"margin-right:10px;\\\">Cancel</a>\\n        </div>\\n    </div>\\n</div>\";\n  },\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"profile/Profile\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  var helper, functionType=\"function\", helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;\n  return \"\\n<div class=\\\"section-box validationEngineContainer\\\">\\n    <h4 class=\\\"section-header\\\">\\n        <span class=\\\"icons16 sectionArrow-blue\\\"></span>\\n        <a href=\\\"javascript:;\\\" class=\\\"toggle-link\\\">Manage you profile here</a>\\n    </h4>\\n    <div class=\\\"section-content\\\">\\n        <div class=\\\"section-row\\\">\\n            <label>User name\\n                <a href=\\\"#change-password\\\" style=\\\"margin-left:10px;\\\">Change password</a>\\n            </label>\\n            <input type=\\\"text\\\" name=\\\"username\\\" class=\\\"validate[required]\\\" value=\\\"\"\n    + escapeExpression(((helper = (helper = helpers.username || (depth0 != null ? depth0.username : depth0)) != null ? helper : helperMissing),(typeof helper === functionType ? helper.call(depth0, {\"name\":\"username\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n        </div>\\n        <div class=\\\"section-row\\\">\\n            <label>Email</label>\\n            <input type=\\\"text\\\" name=\\\"email\\\" class=\\\"validate[required, custom[email]]\\\" value=\\\"\"\n    + escapeExpression(((helper = (helper = helpers.email || (depth0 != null ? depth0.email : depth0)) != null ? helper : helperMissing),(typeof helper === functionType ? helper.call(depth0, {\"name\":\"email\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n        </div>\\n        <div class=\\\"section-row\\\">\\n            <label>Last Name</label>\\n            <input type=\\\"text\\\" name=\\\"lastName\\\" value=\\\"\"\n    + escapeExpression(((helper = (helper = helpers.lastName || (depth0 != null ? depth0.lastName : depth0)) != null ? helper : helperMissing),(typeof helper === functionType ? helper.call(depth0, {\"name\":\"lastName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n        </div>\\n        <div class=\\\"section-row\\\">\\n            <label>First Name</label>\\n            <input type=\\\"text\\\" name=\\\"firstName\\\" value=\\\"\"\n    + escapeExpression(((helper = (helper = helpers.firstName || (depth0 != null ? depth0.firstName : depth0)) != null ? helper : helperMissing),(typeof helper === functionType ? helper.call(depth0, {\"name\":\"firstName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n        </div>\\n        <div class=\\\"section-row\\\">\\n            <label>Phone Num</label>\\n            <input type=\\\"text\\\" name=\\\"phone\\\" value=\\\"\"\n    + escapeExpression(((helper = (helper = helpers.phone || (depth0 != null ? depth0.phone : depth0)) != null ? helper : helperMissing),(typeof helper === functionType ? helper.call(depth0, {\"name\":\"phone\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n        </div>\\n        <div class=\\\"section-row\\\">\\n            <a href=\\\"javascript:;\\\" class=\\\"right btn-update lm-button purple animate\\\">Update</a>\\n            <a href=\\\"index.html\\\" class=\\\"right lm-button gray animate\\\" style=\\\"margin-right:10px;\\\">Cancel</a>\\n        </div>\\n    </div>\\n</div>\\n\";\n},\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"profile/ProfileWorkspace\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"<div class=\\\"sub-con\\\"></div>\\n\";\n  },\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"profile/partials/placeholder\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"\";\n},\"useData\":true});\n\n\n\nthis[\"LMTPL\"][\"profile/placeholder\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"\";\n},\"useData\":true});\n\nreturn this[\"LMTPL\"];\n\n});\n","define('profile/partials_compiled',['handlebars'], function(Handlebars) {\n\nthis[\"LMPAR\"] = this[\"LMPAR\"] || {};\n\nHandlebars.registerPartial(\"profile/placeholder\", this[\"LMPAR\"][\"profile/placeholder\"] = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n  return \"\";\n},\"useData\":true}));\n\nreturn this[\"LMPAR\"];\n\n});\n","define('profile/templates/main',[\n\t'handlebars',\n\t'commons/logicmonitor/templates',\n\t'profile/templates_compiled',\n\t'profile/partials_compiled'\n], function (Handlebars, commonTemplates, templates) {\n\t// return compiled templates\n\treturn templates;\n});\n\n","define('profile/views/ProfileView',[\n\t'core',\n\t'lodash',\n\t'profile/templates',\n\t'modelurls',\n\t'lmblockui',\n\t'lmmsgbox',\n\t'commons/logicmonitor/models/UserModel',\n\t'jq-validationEngine-en'\n], function (LM, _, templates, modelUrls, BlockUI, MessageBox, UserModel) {\n\n\treturn LM.View.extend({\n\t\ttemplate: templates['profile/Profile'],\n\n\t\tevents: {\n\t\t\t'click .btn-update': '_onUpdate'\n\t\t},\n\n\t\tappEvents: {\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tthis.blockUI = new BlockUI();\n\n\t\t\tthis.listenTo(this.model, 'change', this.render);\n\t\t},\n\n\t\trender: function () {\n\t\t\tthis.$el.html(this.template(this.model.toJSON()));\n\n\t\t\tthis.$('.validationEngineContainer').validationEngine({\n\t\t\t});\n\t\t},\n\n\t\t_onUpdate: function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar that = this;\n\n\t\t\tif (this.$('.validationEngineContainer').validationEngine('validate')) {\n\t\t\t\tvar data = this.serializeForm();\n\n\t\t\t\tthis.blockUI.block({\n\t\t\t\t\tmessage: 'Updating...'\n\t\t\t\t});\n\n\t\t\t\tthis._update(data, function (err) {\n\t\t\t\t\tthat.blockUI.unBlock();\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tMessageBox.alert( 'Update user profile info successfully!', 'Update user profile');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tMessageBox.alert( err.status + ':' + err.errmsg, 'Error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_update: function (data, cb) {\n\t\t\tthis.model.save(data, {\n\t\t\t\tsuccess: function (model, response) {\n\t\t\t\t\tcb(null, model.toJSON());\n\t\t\t\t},\n\t\t\t\terror: function (model, response) {\n\t\t\t\t\tcb(response);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\n","define('profile/views/ChangePasswordView',[\n\t'core',\n\t'profile/templates',\n\t'modelurls',\n\t'lmblockui',\n\t'lmmsgbox',\n\t'commons/logicmonitor/models/UserModel',\n\t'jq-validationEngine-en'\n], function (LM, templates, modelUrls, BlockUI, MessageBox, UserModel) {\n\n\treturn LM.View.extend({\n\t\ttemplate: templates['profile/ChangePassword'],\n\n\t\tevents: {\n\t\t\t'click .btn-change': '_onChangePass'\n\t\t},\n\n\t\tappEvents: {\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tthis.blockUI = new BlockUI();\n\t\t},\n\n\t\trender: function () {\n\t\t\tthis.$el.html(this.template());\n\t\t\tthis.$('.validationEngineContainer').validationEngine({\n\t\t\t});\n\t\t},\n\n\t\t_onChangePass: function (e) {\n\t\t\tvar that = this;\n\t\t\te.preventDefault();\n\n\t\t\tif (this.$('.validationEngineContainer').validationEngine('validate')) {\n\t\t\t\tthis.blockUI.block({\n\t\t\t\t});\n\n\t\t\t\tvar data = this.serializeForm();\n\n\t\t\t\tthis._changePass(data, function (err) {\n\t\t\t\t\tthat.blockUI.unBlock();\n\t\t\t\t\tif (!err) {\n\t\t\t\t\t\tLM.logoffUser();\n\t\t\t\t\t\tnew MessageBox({\n\t\t\t\t\t\t\ttype: 'alert',\n\t\t\t\t\t\t\ttitle: 'Password change successfully',\n\t\t\t\t\t\t\twidth: 600,\n\t\t\t\t\t\t\tbodyData: {\n\t\t\t\t\t\t\t\tmsg: '<p style=\"line-height: 1.5\">You password has been changed, please ' +\n\t\t\t\t\t\t\t\t\t'<a href=\"login.html\" style=\"font-size: 16px;\">Go to log in!</a></p>',\n\t\t\t\t\t\t\t\tallowHTML: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).on('dialog:closing', function () {\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tlocation.href = 'login.html';\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tMessageBox.alert( err.status + ':' + err.errmsg, 'Error');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t_changePass: function (data, cb) {\n\t\t\tvar loginUser = LM.getLoginUser();\n\t\t\tvar user = new UserModel({\n\t\t\t\tpassword: data.password,\n\t\t\t\tid: loginUser.id\n\t\t\t});\n\n\t\t\tuser.save(null, {\n\t\t\t\tpatch: true,\n\t\t\t\tsuccess: function (model, response) {\n\t\t\t\t\tcb(null, model.toJSON());\n\t\t\t\t},\n\t\t\t\terror: function (model, response) {\n\t\t\t\t\tcb(response);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\n","define('profile/views/ProfileWorkspaceView',[\n\t'core',\n\t'profile/templates',\n\t'modelurls',\n\t'lmblockui',\n\t'lmmsgbox',\n\t'./ProfileView',\n\t'./ChangePasswordView',\n\t'commons/logicmonitor/models/UserModel'\n], function (LM, templates, modelUrls, BlockUI, MessageBox, ProfileView, ChangePasswordView, UserModel) {\n\n\treturn LM.View.extend({\n\t\tclassName: 'workspace profile-workspace',\n\n\t\ttemplate: templates['profile/ProfileWorkspace'],\n\n\t\tevents: {\n\t\t},\n\n\t\tappEvents: {\n\t\t},\n\n\t\tinitialize: function (options) {\n\t\t\tthis.module = options.module;\n\t\t\tthis.blockUI = new BlockUI();\n\t\t},\n\n\t\trender: function () {\n\t\t\tvar module = this.module;\n\n\t\t\tthis.$el.html(this.template());\n\n\t\t\tif (module == 'change-password') {\n\t\t\t\tthis.registerComponent('sub', new ChangePasswordView(), '.sub-con');\n\t\t\t} else {\n\t\t\t\tvar userModel = new UserModel(LM.getLoginUser());\n\t\t\t\tthis.registerComponent('sub', new ProfileView({\n\t\t\t\t\tmodel: userModel\n\t\t\t\t}), '.sub-con');\n\t\t\t\tuserModel.fetch();\n\t\t\t}\n\t\t}\n\t});\n});\n\n","define('profile/router',[\n\t'jquery',\n\t'backbone',\n    './views/ProfileWorkspaceView'\n], function ($, Backbone, ProfileWorkspaceView) {\n\n\treturn Backbone.Router.extend({\n\t\troutes: {\n\t\t\t'(*module)': 'showWorkspace'\n\t\t},\n\n\t\tinitialize: function () {\n\t\t},\n\n\t\tshowWorkspace: function (module) {\n\t\t\tmodule = module || 'profile';\n\n\t\t\tif (this.appView) {\n\t\t\t\tthis.appView.remove();\n\t\t\t}\n\n\t\t\tthis.appView = new ProfileWorkspaceView({\n\t\t\t\tmodule: module\n\t\t\t});\n\n\t\t\t$('.workspace-con').append(this.appView.el);\n\t\t\tthis.appView.render();\n\t\t}\n\t});\n});\n\n","define('profile/index',[\n\t'backbone',\n\t'./router'\n], function(Backbone, Router) {\n\tnew Router();\n\tBackbone.history.start();\n});\n\n"]}